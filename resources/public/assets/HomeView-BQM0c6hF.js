var Bl=Object.defineProperty;var zl=(e,o,l)=>o in e?Bl(e,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[o]=l;var fe=(e,o,l)=>zl(e,typeof o!="symbol"?o+"":o,l);import{i as tl,e as ht,c as w,g as Fe,l as Hl,h as ll,a as M,b as st,u as Vt,d as ol,f as nl,j as al,r as C,k as ul,p as je,n as re,m as $t,w as Z,o as Ol,q as Ue,s as Fl,t as bt,v as Rt,x as _l,y as Il,z as Ll,A as Pl,B as $l,C as Rl,D as Dl,E as Wl,F as jl,G as Kl,H as Ql,I as Nl,J as Ul,K as Xl,L as Dt,M as Yl,N as Gl,O as Jl,P as Zl,Q as eo,T as to,R as lo,S as oo,U as we,V as no,W as ao,X as uo,Y as io,Z as ro,_ as so,$ as co,a0 as fo,a1 as vo,a2 as wt,a3 as $e,a4 as ze,a5 as mo,a6 as il,a7 as Wt,a8 as go,a9 as ho,aa as ct,ab as ue,ac as ve,ad as J,ae as I,af as T,ag as Qe,ah as xe,ai as Ke,aj as et,ak as se,al as xt,am as tt,an as Re,ao as De,ap as So,aq as rl,ar as Ne,as as He,at as yo,au as po,av as bo,aw as jt,ax as wo,ay as xo,az as Co}from"./index-CD41BR24.js";import{c as ko,n as Kt,Q as Vo,a as qo,b as Eo,d as Ao,u as Mo,e as To,C as sl,F as cl,_ as Bo}from"./QItemLabel-oeH1brHp.js";const zo={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},expand:Boolean};function Ho(){const{props:e,proxy:{$q:o}}=Fe(),l=tl(Hl,ht);if(l===ht)return console.error("QPageSticky needs to be child of QLayout"),ht;const n=w(()=>{const p=e.position;return{top:p.indexOf("top")!==-1,right:p.indexOf("right")!==-1,bottom:p.indexOf("bottom")!==-1,left:p.indexOf("left")!==-1,vertical:p==="top"||p==="bottom",horizontal:p==="left"||p==="right"}}),r=w(()=>l.header.offset),a=w(()=>l.right.offset),s=w(()=>l.footer.offset),d=w(()=>l.left.offset),h=w(()=>{let p=0,b=0;const i=n.value,y=o.lang.rtl===!0?-1:1;i.top===!0&&r.value!==0?b=`${r.value}px`:i.bottom===!0&&s.value!==0&&(b=`${-s.value}px`),i.left===!0&&d.value!==0?p=`${y*d.value}px`:i.right===!0&&a.value!==0&&(p=`${-y*a.value}px`);const L={transform:`translate(${p}, ${b})`};return e.offset&&(L.margin=`${e.offset[1]}px ${e.offset[0]}px`),i.vertical===!0?(d.value!==0&&(L[o.lang.rtl===!0?"right":"left"]=`${d.value}px`),a.value!==0&&(L[o.lang.rtl===!0?"left":"right"]=`${a.value}px`)):i.horizontal===!0&&(r.value!==0&&(L.top=`${r.value}px`),s.value!==0&&(L.bottom=`${s.value}px`)),L}),S=w(()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--${e.expand===!0?"expand":"shrink"}`);function c(p){const b=ll(p.default);return M("div",{class:S.value,style:h.value},e.expand===!0?b:[M("div",b)])}return{$layout:l,getStickyContent:c}}const Oo=st({name:"QPageSticky",props:zo,setup(e,{slots:o}){const{getStickyContent:l}=Ho();return()=>l(o)}}),Fo=st({name:"QField",inheritAttrs:!1,props:{...Vt,tag:{type:String,default:"label"}},emits:ol,setup(){return nl(al({tagProp:!0}))}}),_o={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},Io={..._o,contextMenu:Boolean};function Lo({showing:e,avoidEmit:o,configureAnchorEl:l}){const{props:n,proxy:r,emit:a}=Fe(),s=C(null);let d=null;function h(i){return s.value===null?!1:i===void 0||i.touches===void 0||i.touches.length<=1}const S={};l===void 0&&(Object.assign(S,{hide(i){r.hide(i)},toggle(i){r.toggle(i),i.qAnchorHandled=!0},toggleKey(i){ul(i,13)===!0&&S.toggle(i)},contextClick(i){r.hide(i),je(i),re(()=>{r.show(i),i.qAnchorHandled=!0})},prevent:je,mobileTouch(i){if(S.mobileCleanup(i),h(i)!==!0)return;r.hide(i),s.value.classList.add("non-selectable");const y=i.target;$t(S,"anchor",[[y,"touchmove","mobileCleanup","passive"],[y,"touchend","mobileCleanup","passive"],[y,"touchcancel","mobileCleanup","passive"],[s.value,"contextmenu","prevent","notPassive"]]),d=setTimeout(()=>{d=null,r.show(i),i.qAnchorHandled=!0},300)},mobileCleanup(i){s.value.classList.remove("non-selectable"),d!==null&&(clearTimeout(d),d=null),e.value===!0&&i!==void 0&&ko()}}),l=function(i=n.contextMenu){if(n.noParentEvent===!0||s.value===null)return;let y;i===!0?r.$q.platform.is.mobile===!0?y=[[s.value,"touchstart","mobileTouch","passive"]]:y=[[s.value,"mousedown","hide","passive"],[s.value,"contextmenu","contextClick","notPassive"]]:y=[[s.value,"click","toggle","passive"],[s.value,"keyup","toggleKey","passive"]],$t(S,"anchor",y)});function c(){Fl(S,"anchor")}function p(i){for(s.value=i;s.value.classList.contains("q-anchor--skip");)s.value=s.value.parentNode;l()}function b(){if(n.target===!1||n.target===""||r.$el.parentNode===null)s.value=null;else if(n.target===!0)p(r.$el.parentNode);else{let i=n.target;if(typeof n.target=="string")try{i=document.querySelector(n.target)}catch{i=void 0}i!=null?(s.value=i.$el||i,l()):(s.value=null,console.error(`Anchor: target "${n.target}" not found`))}}return Z(()=>n.contextMenu,i=>{s.value!==null&&(c(),l(i))}),Z(()=>n.target,()=>{s.value!==null&&c(),b()}),Z(()=>n.noParentEvent,i=>{s.value!==null&&(i===!0?c():l())}),Ol(()=>{b(),o!==!0&&n.modelValue===!0&&s.value===null&&a("update:modelValue",!1)}),Ue(()=>{d!==null&&clearTimeout(d),c()}),{anchorEl:s,canShow:h,anchorEvents:S}}function Po(e,o){const l=C(null);let n;function r(d,h){const S=`${h!==void 0?"add":"remove"}EventListener`,c=h!==void 0?h:n;d!==window&&d[S]("scroll",c,bt.passive),window[S]("scroll",c,bt.passive),n=h}function a(){l.value!==null&&(r(l.value),l.value=null)}const s=Z(()=>e.noParentEvent,()=>{l.value!==null&&(a(),o())});return Ue(s),{localScrollTarget:l,unconfigureScrollTarget:a,changeScrollEvent:r}}const{notPassiveCapture:lt}=bt,Ce=[];function ot(e){const o=e.target;if(o===void 0||o.nodeType===8||o.classList.contains("no-pointer-events")===!0)return;let l=Rt.length-1;for(;l>=0;){const n=Rt[l].$;if(n.type.name==="QTooltip"){l--;continue}if(n.type.name!=="QDialog")break;if(n.props.seamless!==!0)return;l--}for(let n=Ce.length-1;n>=0;n--){const r=Ce[n];if((r.anchorEl.value===null||r.anchorEl.value.contains(o)===!1)&&(o===document.body||r.innerRef.value!==null&&r.innerRef.value.contains(o)===!1))e.qClickOutside=!0,r.onClickOutside(e);else return}}function $o(e){Ce.push(e),Ce.length===1&&(document.addEventListener("mousedown",ot,lt),document.addEventListener("touchstart",ot,lt))}function Qt(e){const o=Ce.findIndex(l=>l===e);o!==-1&&(Ce.splice(o,1),Ce.length===0&&(document.removeEventListener("mousedown",ot,lt),document.removeEventListener("touchstart",ot,lt)))}let Nt,Ut;function Xt(e){const o=e.split(" ");return o.length!==2?!1:["top","center","bottom"].includes(o[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(o[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function Ro(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const Ct={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{Ct[`${e}#ltr`]=e,Ct[`${e}#rtl`]=e});function Yt(e,o){const l=e.split(" ");return{vertical:l[0],horizontal:Ct[`${l[1]}#${o===!0?"rtl":"ltr"}`]}}function Do(e,o){let{top:l,left:n,right:r,bottom:a,width:s,height:d}=e.getBoundingClientRect();return o!==void 0&&(l-=o[1],n-=o[0],a+=o[1],r+=o[0],s+=o[0],d+=o[1]),{top:l,bottom:a,height:d,left:n,right:r,width:s,middle:n+(r-n)/2,center:l+(a-l)/2}}function Wo(e,o,l){let{top:n,left:r}=e.getBoundingClientRect();return n+=o.top,r+=o.left,l!==void 0&&(n+=l[1],r+=l[0]),{top:n,bottom:n+1,height:1,left:r,right:r+1,width:1,middle:r,center:n}}function jo(e,o){return{top:0,center:o/2,bottom:o,left:0,middle:e/2,right:e}}function Gt(e,o,l,n){return{top:e[l.vertical]-o[n.vertical],left:e[l.horizontal]-o[n.horizontal]}}function dl(e,o=0){if(e.targetEl===null||e.anchorEl===null||o>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{dl(e,o+1)},10);return}const{targetEl:l,offset:n,anchorEl:r,anchorOrigin:a,selfOrigin:s,absoluteOffset:d,fit:h,cover:S,maxHeight:c,maxWidth:p}=e;if(_l.is.ios===!0&&window.visualViewport!==void 0){const z=document.body.style,{offsetLeft:W,offsetTop:K}=window.visualViewport;W!==Nt&&(z.setProperty("--q-pe-left",W+"px"),Nt=W),K!==Ut&&(z.setProperty("--q-pe-top",K+"px"),Ut=K)}const{scrollLeft:b,scrollTop:i}=l,y=d===void 0?Do(r,S===!0?[0,0]:n):Wo(r,d,n);Object.assign(l.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:p,maxHeight:c,visibility:"visible"});const{offsetWidth:L,offsetHeight:F}=l,{elWidth:j,elHeight:V}=h===!0||S===!0?{elWidth:Math.max(y.width,L),elHeight:S===!0?Math.max(y.height,F):F}:{elWidth:L,elHeight:F};let q={maxWidth:p,maxHeight:c};(h===!0||S===!0)&&(q.minWidth=y.width+"px",S===!0&&(q.minHeight=y.height+"px")),Object.assign(l.style,q);const B=jo(j,V);let P=Gt(y,B,a,s);if(d===void 0||n===void 0)St(P,y,B,a,s);else{const{top:z,left:W}=P;St(P,y,B,a,s);let K=!1;if(P.top!==z){K=!0;const X=2*n[1];y.center=y.top-=X,y.bottom-=X+2}if(P.left!==W){K=!0;const X=2*n[0];y.middle=y.left-=X,y.right-=X+2}K===!0&&(P=Gt(y,B,a,s),St(P,y,B,a,s))}q={top:P.top+"px",left:P.left+"px"},P.maxHeight!==void 0&&(q.maxHeight=P.maxHeight+"px",y.height>P.maxHeight&&(q.minHeight=q.maxHeight)),P.maxWidth!==void 0&&(q.maxWidth=P.maxWidth+"px",y.width>P.maxWidth&&(q.minWidth=q.maxWidth)),Object.assign(l.style,q),l.scrollTop!==i&&(l.scrollTop=i),l.scrollLeft!==b&&(l.scrollLeft=b)}function St(e,o,l,n,r){const a=l.bottom,s=l.right,d=Il(),h=window.innerHeight-d,S=document.body.clientWidth;if(e.top<0||e.top+a>h)if(r.vertical==="center")e.top=o[n.vertical]>h/2?Math.max(0,h-a):0,e.maxHeight=Math.min(a,h);else if(o[n.vertical]>h/2){const c=Math.min(h,n.vertical==="center"?o.center:n.vertical===r.vertical?o.bottom:o.top);e.maxHeight=Math.min(a,c),e.top=Math.max(0,c-a)}else e.top=Math.max(0,n.vertical==="center"?o.center:n.vertical===r.vertical?o.top:o.bottom),e.maxHeight=Math.min(a,h-e.top);if(e.left<0||e.left+s>S)if(e.maxWidth=Math.min(s,S),r.horizontal==="middle")e.left=o[n.horizontal]>S/2?Math.max(0,S-s):0;else if(o[n.horizontal]>S/2){const c=Math.min(S,n.horizontal==="middle"?o.middle:n.horizontal===r.horizontal?o.right:o.left);e.maxWidth=Math.min(s,c),e.left=Math.max(0,c-e.maxWidth)}else e.left=Math.max(0,n.horizontal==="middle"?o.middle:n.horizontal===r.horizontal?o.left:o.right),e.maxWidth=Math.min(s,S-e.left)}const Ko=st({name:"QMenu",inheritAttrs:!1,props:{...Io,...Ll,...Pl,...$l,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Xt},self:{type:String,validator:Xt},offset:{type:Array,validator:Ro},scrollTarget:Rl,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Dl,"click","escapeKey"],setup(e,{slots:o,emit:l,attrs:n}){let r=null,a,s,d;const h=Fe(),{proxy:S}=h,{$q:c}=S,p=C(null),b=C(!1),i=w(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),y=Wl(e,c),{registerTick:L,removeTick:F}=jl(),{registerTimeout:j}=Kl(),{transitionProps:V,transitionStyle:q}=Ql(e),{localScrollTarget:B,changeScrollEvent:P,unconfigureScrollTarget:z}=Po(e,k),{anchorEl:W,canShow:K}=Lo({showing:b}),{hide:X}=Nl({showing:b,canShow:K,handleShow:he,handleHide:u,hideOnRouteChange:i,processOnMount:!0}),{showPortal:te,hidePortal:me,renderPortal:U}=Ul(h,p,R,"menu"),ie={anchorEl:W,innerRef:p,onClickOutside(f){if(e.persistent!==!0&&b.value===!0)return X(f),(f.type==="touchstart"||f.target.classList.contains("q-dialog__backdrop"))&&we(f),!0}},ge=w(()=>Yt(e.anchor||(e.cover===!0?"center middle":"bottom start"),c.lang.rtl)),ce=w(()=>e.cover===!0?ge.value:Yt(e.self||"top start",c.lang.rtl)),G=w(()=>(e.square===!0?" q-menu--square":"")+(y.value===!0?" q-menu--dark q-dark":"")),_e=w(()=>e.autoClose===!0?{onClick:H}:{}),de=w(()=>b.value===!0&&e.persistent!==!0);Z(de,f=>{f===!0?(Xl(A),$o(ie)):(Dt(A),Qt(ie))});function le(){lo(()=>{let f=p.value;f&&f.contains(document.activeElement)!==!0&&(f=f.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||f.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||f.querySelector("[autofocus], [data-autofocus]")||f,f.focus({preventScroll:!0}))})}function he(f){if(r=e.noRefocus===!1?document.activeElement:null,Yl($),te(),k(),a=void 0,f!==void 0&&(e.touchPosition||e.contextMenu)){const Q=Gl(f);if(Q.left!==void 0){const{top:oe,left:Ve}=W.value.getBoundingClientRect();a={left:Q.left-Ve,top:Q.top-oe}}}s===void 0&&(s=Z(()=>c.screen.width+"|"+c.screen.height+"|"+e.self+"|"+e.anchor+"|"+c.lang.rtl,x)),e.noFocus!==!0&&document.activeElement.blur(),L(()=>{x(),e.noFocus!==!0&&le()}),j(()=>{c.platform.is.ios===!0&&(d=e.autoClose,p.value.click()),x(),te(!0),l("show",f)},e.transitionDuration)}function u(f){F(),me(),v(!0),r!==null&&(f===void 0||f.qClickOutside!==!0)&&(((f&&f.type.indexOf("key")===0?r.closest('[tabindex]:not([tabindex^="-"])'):void 0)||r).focus(),r=null),j(()=>{me(!0),l("hide",f)},e.transitionDuration)}function v(f){a=void 0,s!==void 0&&(s(),s=void 0),(f===!0||b.value===!0)&&(Jl($),z(),Qt(ie),Dt(A)),f!==!0&&(r=null)}function k(){(W.value!==null||e.scrollTarget!==void 0)&&(B.value=Zl(W.value,e.scrollTarget),P(B.value,x))}function H(f){d!==!0?(eo(S,f),l("click",f)):d=!1}function $(f){de.value===!0&&e.noFocus!==!0&&oo(p.value,f.target)!==!0&&le()}function A(f){l("escapeKey"),X(f)}function x(){dl({targetEl:p.value,offset:e.offset,anchorEl:W.value,anchorOrigin:ge.value,selfOrigin:ce.value,absoluteOffset:a,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function R(){return M(to,V.value,()=>b.value===!0?M("div",{role:"menu",...n,ref:p,tabindex:-1,class:["q-menu q-position-engine scroll"+G.value,n.class],style:[n.style,q.value],..._e.value},ll(o.default)):null)}return Ue(v),Object.assign(S,{focus:le,updatePosition:x}),U}});let nt=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const o=document.createElement("div");Object.assign(o.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(o),e.scrollLeft=-1e3,nt=e.scrollLeft>=0,e.remove()}const ee=1e3,Qo=["start","center","end","start-force","center-force","end-force"],fl=Array.prototype.filter,No=window.getComputedStyle(document.body).overflowAnchor===void 0?no:function(e,o){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const l=e.children||[];fl.call(l,r=>r.dataset&&r.dataset.qVsAnchor!==void 0).forEach(r=>{delete r.dataset.qVsAnchor});const n=l[o];n&&n.dataset&&(n.dataset.qVsAnchor="")}))};function Oe(e,o){return e+o}function yt(e,o,l,n,r,a,s,d){const h=e===window?document.scrollingElement||document.documentElement:e,S=r===!0?"offsetWidth":"offsetHeight",c={scrollStart:0,scrollViewSize:-s-d,scrollMaxSize:0,offsetStart:-s,offsetEnd:-d};if(r===!0?(e===window?(c.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,c.scrollViewSize+=document.documentElement.clientWidth):(c.scrollStart=h.scrollLeft,c.scrollViewSize+=h.clientWidth),c.scrollMaxSize=h.scrollWidth,a===!0&&(c.scrollStart=(nt===!0?c.scrollMaxSize-c.scrollViewSize:0)-c.scrollStart)):(e===window?(c.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,c.scrollViewSize+=document.documentElement.clientHeight):(c.scrollStart=h.scrollTop,c.scrollViewSize+=h.clientHeight),c.scrollMaxSize=h.scrollHeight),l!==null)for(let p=l.previousElementSibling;p!==null;p=p.previousElementSibling)p.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetStart+=p[S]);if(n!==null)for(let p=n.nextElementSibling;p!==null;p=p.nextElementSibling)p.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetEnd+=p[S]);if(o!==e){const p=h.getBoundingClientRect(),b=o.getBoundingClientRect();r===!0?(c.offsetStart+=b.left-p.left,c.offsetEnd-=b.width):(c.offsetStart+=b.top-p.top,c.offsetEnd-=b.height),e!==window&&(c.offsetStart+=c.scrollStart),c.offsetEnd+=c.scrollMaxSize-c.offsetStart}return c}function Jt(e,o,l,n){o==="end"&&(o=(e===window?document.body:e)[l===!0?"scrollWidth":"scrollHeight"]),e===window?l===!0?(n===!0&&(o=(nt===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-o),window.scrollTo(o,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,o):l===!0?(n===!0&&(o=(nt===!0?e.scrollWidth-e.offsetWidth:0)-o),e.scrollLeft=o):e.scrollTop=o}function We(e,o,l,n){if(l>=n)return 0;const r=o.length,a=Math.floor(l/ee),s=Math.floor((n-1)/ee)+1;let d=e.slice(a,s).reduce(Oe,0);return l%ee!==0&&(d-=o.slice(a*ee,l).reduce(Oe,0)),n%ee!==0&&n!==r&&(d-=o.slice(n,s*ee).reduce(Oe,0)),d}const Uo={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Zt={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Uo};function Xo({virtualScrollLength:e,getVirtualScrollTarget:o,getVirtualScrollEl:l,virtualScrollItemSizeComputed:n}){const r=Fe(),{props:a,emit:s,proxy:d}=r,{$q:h}=d;let S,c,p,b=[],i;const y=C(0),L=C(0),F=C({}),j=C(null),V=C(null),q=C(null),B=C({from:0,to:0}),P=w(()=>a.tableColspan!==void 0?a.tableColspan:100);n===void 0&&(n=w(()=>a.virtualScrollItemSize));const z=w(()=>n.value+";"+a.virtualScrollHorizontal),W=w(()=>z.value+";"+a.virtualScrollSliceRatioBefore+";"+a.virtualScrollSliceRatioAfter);Z(W,()=>{G()}),Z(z,K);function K(){ce(c,!0)}function X(u){ce(u===void 0?c:u)}function te(u,v){const k=o();if(k==null||k.nodeType===8)return;const H=yt(k,l(),j.value,V.value,a.virtualScrollHorizontal,h.lang.rtl,a.virtualScrollStickySizeStart,a.virtualScrollStickySizeEnd);p!==H.scrollViewSize&&G(H.scrollViewSize),U(k,H,Math.min(e.value-1,Math.max(0,parseInt(u,10)||0)),0,Qo.indexOf(v)!==-1?v:c!==-1&&u>c?"end":"start")}function me(){const u=o();if(u==null||u.nodeType===8)return;const v=yt(u,l(),j.value,V.value,a.virtualScrollHorizontal,h.lang.rtl,a.virtualScrollStickySizeStart,a.virtualScrollStickySizeEnd),k=e.value-1,H=v.scrollMaxSize-v.offsetStart-v.offsetEnd-L.value;if(S===v.scrollStart)return;if(v.scrollMaxSize<=0){U(u,v,0,0);return}p!==v.scrollViewSize&&G(v.scrollViewSize),ie(B.value.from);const $=Math.floor(v.scrollMaxSize-Math.max(v.scrollViewSize,v.offsetEnd)-Math.min(i[k],v.scrollViewSize/2));if($>0&&Math.ceil(v.scrollStart)>=$){U(u,v,k,v.scrollMaxSize-v.offsetEnd-b.reduce(Oe,0));return}let A=0,x=v.scrollStart-v.offsetStart,R=x;if(x<=H&&x+v.scrollViewSize>=y.value)x-=y.value,A=B.value.from,R=x;else for(let f=0;x>=b[f]&&A<k;f++)x-=b[f],A+=ee;for(;x>0&&A<k;)x-=i[A],x>-v.scrollViewSize?(A++,R=x):R=i[A]+x;U(u,v,A,R)}function U(u,v,k,H,$){const A=typeof $=="string"&&$.indexOf("-force")!==-1,x=A===!0?$.replace("-force",""):$,R=x!==void 0?x:"start";let f=Math.max(0,k-F.value[R]),Q=f+F.value.total;Q>e.value&&(Q=e.value,f=Math.max(0,Q-F.value.total)),S=v.scrollStart;const oe=f!==B.value.from||Q!==B.value.to;if(oe===!1&&x===void 0){de(k);return}const{activeElement:Ve}=document,ne=q.value;oe===!0&&ne!==null&&ne!==Ve&&ne.contains(Ve)===!0&&(ne.addEventListener("focusout",ge),setTimeout(()=>{ne!==null&&ne.removeEventListener("focusout",ge)})),No(ne,k-f);const Xe=x!==void 0?i.slice(f,k).reduce(Oe,0):0;if(oe===!0){const Se=Q>=B.value.from&&f<=B.value.to?B.value.to:Q;B.value={from:f,to:Se},y.value=We(b,i,0,f),L.value=We(b,i,Q,e.value),requestAnimationFrame(()=>{B.value.to!==Q&&S===v.scrollStart&&(B.value={from:B.value.from,to:Q},L.value=We(b,i,Q,e.value))})}requestAnimationFrame(()=>{if(S!==v.scrollStart)return;oe===!0&&ie(f);const Se=i.slice(f,k).reduce(Oe,0),ye=Se+v.offsetStart+y.value,Ye=ye+i[k];let Ie=ye+H;if(x!==void 0){const dt=Se-Xe,Le=v.scrollStart+dt;Ie=A!==!0&&Le<ye&&Ye<Le+v.scrollViewSize?Le:x==="end"?Ye-v.scrollViewSize:ye-(x==="start"?0:Math.round((v.scrollViewSize-i[k])/2))}S=Ie,Jt(u,Ie,a.virtualScrollHorizontal,h.lang.rtl),de(k)})}function ie(u){const v=q.value;if(v){const k=fl.call(v.children,f=>f.classList&&f.classList.contains("q-virtual-scroll--skip")===!1),H=k.length,$=a.virtualScrollHorizontal===!0?f=>f.getBoundingClientRect().width:f=>f.offsetHeight;let A=u,x,R;for(let f=0;f<H;){for(x=$(k[f]),f++;f<H&&k[f].classList.contains("q-virtual-scroll--with-prev")===!0;)x+=$(k[f]),f++;R=x-i[A],R!==0&&(i[A]+=R,b[Math.floor(A/ee)]+=R),A++}}}function ge(){q.value!==null&&q.value!==void 0&&q.value.focus()}function ce(u,v){const k=1*n.value;(v===!0||Array.isArray(i)===!1)&&(i=[]);const H=i.length;i.length=e.value;for(let A=e.value-1;A>=H;A--)i[A]=k;const $=Math.floor((e.value-1)/ee);b=[];for(let A=0;A<=$;A++){let x=0;const R=Math.min((A+1)*ee,e.value);for(let f=A*ee;f<R;f++)x+=i[f];b.push(x)}c=-1,S=void 0,y.value=We(b,i,0,B.value.from),L.value=We(b,i,B.value.to,e.value),u>=0?(ie(B.value.from),re(()=>{te(u)})):le()}function G(u){if(u===void 0&&typeof window<"u"){const x=o();x!=null&&x.nodeType!==8&&(u=yt(x,l(),j.value,V.value,a.virtualScrollHorizontal,h.lang.rtl,a.virtualScrollStickySizeStart,a.virtualScrollStickySizeEnd).scrollViewSize)}p=u;const v=parseFloat(a.virtualScrollSliceRatioBefore)||0,k=parseFloat(a.virtualScrollSliceRatioAfter)||0,H=1+v+k,$=u===void 0||u<=0?1:Math.ceil(u/n.value),A=Math.max(1,$,Math.ceil((a.virtualScrollSliceSize>0?a.virtualScrollSliceSize:10)/H));F.value={total:Math.ceil(A*H),start:Math.ceil(A*v),center:Math.ceil(A*(.5+v)),end:Math.ceil(A*(1+v)),view:$}}function _e(u,v){const k=a.virtualScrollHorizontal===!0?"width":"height",H={["--q-virtual-scroll-item-"+k]:n.value+"px"};return[u==="tbody"?M(u,{class:"q-virtual-scroll__padding",key:"before",ref:j},[M("tr",[M("td",{style:{[k]:`${y.value}px`,...H},colspan:P.value})])]):M(u,{class:"q-virtual-scroll__padding",key:"before",ref:j,style:{[k]:`${y.value}px`,...H}}),M(u,{class:"q-virtual-scroll__content",key:"content",ref:q,tabindex:-1},v.flat()),u==="tbody"?M(u,{class:"q-virtual-scroll__padding",key:"after",ref:V},[M("tr",[M("td",{style:{[k]:`${L.value}px`,...H},colspan:P.value})])]):M(u,{class:"q-virtual-scroll__padding",key:"after",ref:V,style:{[k]:`${L.value}px`,...H}})]}function de(u){c!==u&&(a.onVirtualScroll!==void 0&&s("virtualScroll",{index:u,from:B.value.from,to:B.value.to-1,direction:u<c?"decrease":"increase",ref:d}),c=u)}G();const le=ao(me,h.platform.is.ios===!0?120:35);uo(()=>{G()});let he=!1;return io(()=>{he=!0}),ro(()=>{if(he!==!0)return;const u=o();S!==void 0&&u!==void 0&&u!==null&&u.nodeType!==8?Jt(u,S,a.virtualScrollHorizontal,h.lang.rtl):te(c)}),Ue(()=>{le.cancel()}),Object.assign(d,{scrollTo:te,reset:K,refresh:X}),{virtualScrollSliceRange:B,virtualScrollSliceSizeComputed:F,setVirtualScrollSize:G,onVirtualScrollEvt:le,localResetVirtualScroll:ce,padVirtualScroll:_e,scrollTo:te,reset:K,refresh:X}}const el=e=>["add","add-unique","toggle"].includes(e),Yo=".*+?^${}()|[]\\",Go=Object.keys(Vt);function pt(e,o){if(typeof e=="function")return e;const l=e!==void 0?e:o;return n=>n!==null&&typeof n=="object"&&l in n?n[l]:n}const at=st({name:"QSelect",inheritAttrs:!1,props:{...Zt,...so,...Vt,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:el},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:Zt.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...ol,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:o,emit:l}){const{proxy:n}=Fe(),{$q:r}=n,a=C(!1),s=C(!1),d=C(-1),h=C(""),S=C(!1),c=C(!1);let p=null,b=null,i,y,L,F=null,j,V,q,B;const P=C(null),z=C(null),W=C(null),K=C(null),X=C(null),te=co(e),me=ho(Ft),U=w(()=>Array.isArray(e.options)?e.options.length:0),ie=w(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:ge,virtualScrollSliceSizeComputed:ce,localResetVirtualScroll:G,padVirtualScroll:_e,onVirtualScrollEvt:de,scrollTo:le,setVirtualScrollSize:he}=Xo({virtualScrollLength:U,getVirtualScrollTarget:yl,getVirtualScrollEl:Ht,virtualScrollItemSizeComputed:ie}),u=al(),v=w(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,m=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const g=e.mapOptions===!0&&i!==void 0?i:[],E=m.map(_=>Sl(_,g));return e.modelValue===null&&t===!0?E.filter(_=>_!==null):E}return m}),k=w(()=>{const t={};return Go.forEach(m=>{const g=e[m];g!==void 0&&(t[m]=g)}),t}),H=w(()=>e.optionsDark===null?u.isDark.value:e.optionsDark),$=w(()=>Wt(v.value)),A=w(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||v.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),x=w(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),R=w(()=>U.value===0),f=w(()=>v.value.map(t=>Y.value(t)).join(", ")),Q=w(()=>e.displayValue!==void 0?e.displayValue:f.value),oe=w(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),Ve=w(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||v.value.some(oe.value))),ne=w(()=>u.focused.value===!0?e.tabindex:-1),Xe=w(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":a.value===!0?"true":"false","aria-controls":`${u.targetUid.value}_lb`};return d.value>=0&&(t["aria-activedescendant"]=`${u.targetUid.value}_${d.value}`),t}),Se=w(()=>({id:`${u.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),ye=w(()=>v.value.map((t,m)=>({index:m,opt:t,html:oe.value(t),selected:!0,removeAtIndex:hl,toggleOption:pe,tabindex:ne.value}))),Ye=w(()=>{if(U.value===0)return[];const{from:t,to:m}=ge.value;return e.options.slice(t,m).map((g,E)=>{const _=qe.value(g)===!0,O=vt(g)===!0,N=t+E,D={clickable:!0,active:O,activeClass:Le.value,manualFocus:!0,focused:!1,disable:_,tabindex:-1,dense:e.optionsDense,dark:H.value,role:"option","aria-selected":O===!0?"true":"false",id:`${u.targetUid.value}_${N}`,onClick:()=>{pe(g)}};return _!==!0&&(d.value===N&&(D.focused=!0),r.platform.is.desktop===!0&&(D.onMousemove=()=>{a.value===!0&&Ee(N)})),{index:N,opt:g,html:oe.value(g),label:Y.value(g),selected:D.active,focused:D.focused,toggleOption:pe,setOptionIndex:Ee,itemProps:D}})}),Ie=w(()=>e.dropdownIcon!==void 0?e.dropdownIcon:r.iconSet.arrow.dropdown),dt=w(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),Le=w(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),ae=w(()=>pt(e.optionValue,"value")),Y=w(()=>pt(e.optionLabel,"label")),qe=w(()=>pt(e.optionDisable,"disable")),Ge=w(()=>v.value.map(ae.value)),gl=w(()=>{const t={onInput:Ft,onChange:me,onKeydown:zt,onKeyup:Tt,onKeypress:Bt,onFocus:At,onClick(m){y===!0&&ze(m)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=me,t});Z(v,t=>{i=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&u.innerLoading.value!==!0&&(s.value!==!0&&a.value!==!0||$.value!==!0)&&(L!==!0&&Be(),(s.value===!0||a.value===!0)&&Ae(""))},{immediate:!0}),Z(()=>e.fillInput,Be),Z(a,mt),Z(U,Tl);function qt(t){return e.emitValue===!0?ae.value(t):t}function ft(t){if(t!==-1&&t<v.value.length)if(e.multiple===!0){const m=e.modelValue.slice();l("remove",{index:t,value:m.splice(t,1)[0]}),l("update:modelValue",m)}else l("update:modelValue",null)}function hl(t){ft(t),u.focus()}function Et(t,m){const g=qt(t);if(e.multiple!==!0){e.fillInput===!0&&Pe(Y.value(t),!0,!0),l("update:modelValue",g);return}if(v.value.length===0){l("add",{index:0,value:g}),l("update:modelValue",e.multiple===!0?[g]:g);return}if(m===!0&&vt(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const E=e.modelValue.slice();l("add",{index:E.length,value:g}),E.push(g),l("update:modelValue",E)}function pe(t,m){if(u.editable.value!==!0||t===void 0||qe.value(t)===!0)return;const g=ae.value(t);if(e.multiple!==!0){m!==!0&&(Pe(e.fillInput===!0?Y.value(t):"",!0,!0),be()),z.value!==null&&z.value.focus(),(v.value.length===0||$e(ae.value(v.value[0]),g)!==!0)&&l("update:modelValue",e.emitValue===!0?g:t);return}if((y!==!0||S.value===!0)&&u.focus(),At(),v.value.length===0){const O=e.emitValue===!0?g:t;l("add",{index:0,value:O}),l("update:modelValue",e.multiple===!0?[O]:O);return}const E=e.modelValue.slice(),_=Ge.value.findIndex(O=>$e(O,g));if(_!==-1)l("remove",{index:_,value:E.splice(_,1)[0]});else{if(e.maxValues!==void 0&&E.length>=e.maxValues)return;const O=e.emitValue===!0?g:t;l("add",{index:E.length,value:O}),E.push(O)}l("update:modelValue",E)}function Ee(t){if(r.platform.is.desktop!==!0)return;const m=t!==-1&&t<U.value?t:-1;d.value!==m&&(d.value=m)}function Je(t=1,m){if(a.value===!0){let g=d.value;do g=Kt(g+t,-1,U.value-1);while(g!==-1&&g!==d.value&&qe.value(e.options[g])===!0);d.value!==g&&(Ee(g),le(g),m!==!0&&e.useInput===!0&&e.fillInput===!0&&Ze(g>=0?Y.value(e.options[g]):j,!0))}}function Sl(t,m){const g=E=>$e(ae.value(E),t);return e.options.find(g)||m.find(g)||t}function vt(t){const m=ae.value(t);return Ge.value.find(g=>$e(g,m))!==void 0}function At(t){e.useInput===!0&&z.value!==null&&(t===void 0||z.value===t.target&&t.target.value===f.value)&&z.value.select()}function Mt(t){ul(t,27)===!0&&a.value===!0&&(ze(t),be(),Be()),l("keyup",t)}function Tt(t){const{value:m}=t.target;if(t.keyCode!==void 0){Mt(t);return}if(t.target.value="",p!==null&&(clearTimeout(p),p=null),b!==null&&(clearTimeout(b),b=null),Be(),typeof m=="string"&&m.length!==0){const g=m.toLocaleLowerCase(),E=O=>{const N=e.options.find(D=>String(O.value(D)).toLocaleLowerCase()===g);return N===void 0?!1:(v.value.indexOf(N)===-1?pe(N):be(),!0)},_=O=>{E(ae)!==!0&&O!==!0&&E(Y)!==!0&&Ae(m,!0,()=>_(!0))};_()}else u.clearValue(t)}function Bt(t){l("keypress",t)}function zt(t){if(l("keydown",t),mo(t)===!0)return;const m=h.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),g=t.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(d.value!==-1||m===!0);if(t.keyCode===27){je(t);return}if(t.keyCode===9&&g===!1){Me();return}if(t.target===void 0||t.target.id!==u.targetUid.value||u.editable.value!==!0)return;if(t.keyCode===40&&u.innerLoading.value!==!0&&a.value===!1){we(t),Te();return}if(t.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&h.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?ft(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&l("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof h.value!="string"||h.value.length===0)&&(we(t),d.value=-1,Je(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&ce.value!==void 0&&(we(t),d.value=Math.max(-1,Math.min(U.value,d.value+(t.keyCode===33?-1:1)*ce.value.view)),Je(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(we(t),Je(t.keyCode===38?-1:1,e.multiple));const E=U.value;if((q===void 0||B<Date.now())&&(q=""),E>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||q.length!==0)){a.value!==!0&&Te(t);const _=t.key.toLocaleLowerCase(),O=q.length===1&&q[0]===_;B=Date.now()+1500,O===!1&&(we(t),q+=_);const N=new RegExp("^"+q.split("").map(gt=>Yo.indexOf(gt)!==-1?"\\"+gt:gt).join(".*"),"i");let D=d.value;if(O===!0||D<0||N.test(Y.value(e.options[D]))!==!0)do D=Kt(D+1,-1,E-1);while(D!==d.value&&(qe.value(e.options[D])===!0||N.test(Y.value(e.options[D]))!==!0));d.value!==D&&re(()=>{Ee(D),le(D),D>=0&&e.useInput===!0&&e.fillInput===!0&&Ze(Y.value(e.options[D]),!0)});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||q!=="")&&(t.keyCode!==9||g===!1))){if(t.keyCode!==9&&we(t),d.value!==-1&&d.value<E){pe(e.options[d.value]);return}if(m===!0){const _=(O,N)=>{if(N){if(el(N)!==!0)return}else N=e.newValueMode;if(Pe("",e.multiple!==!0,!0),O==null)return;(N==="toggle"?pe:Et)(O,N==="add-unique"),e.multiple!==!0&&(z.value!==null&&z.value.focus(),be())};if(e.onNewValue!==void 0?l("newValue",h.value,_):_(h.value),e.multiple!==!0)return}a.value===!0?Me():u.innerLoading.value!==!0&&Te()}}function Ht(){return y===!0?X.value:W.value!==null&&W.value.contentEl!==null?W.value.contentEl:void 0}function yl(){return Ht()}function pl(){return e.hideSelected===!0?[]:o["selected-item"]!==void 0?ye.value.map(t=>o["selected-item"](t)).slice():o.selected!==void 0?[].concat(o.selected()):e.useChips===!0?ye.value.map((t,m)=>M(Vo,{key:"option-"+m,removable:u.editable.value===!0&&qe.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:ne.value,onRemove(){t.removeAtIndex(m)}},()=>M("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:Y.value(t.opt)}))):[M("span",{[Ve.value===!0?"innerHTML":"textContent"]:Q.value})]}function Ot(){if(R.value===!0)return o["no-option"]!==void 0?o["no-option"]({inputValue:h.value}):void 0;const t=o.option!==void 0?o.option:g=>M(Ao,{key:g.index,...g.itemProps},()=>M(qo,()=>M(Eo,()=>M("span",{[g.html===!0?"innerHTML":"textContent"]:g.label}))));let m=_e("div",Ye.value.map(t));return o["before-options"]!==void 0&&(m=o["before-options"]().concat(m)),go(o["after-options"],m)}function bl(t,m){const g=m===!0?{...Xe.value,...u.splitAttrs.attributes.value}:void 0,E={ref:m===!0?z:void 0,key:"i_t",class:A.value,style:e.inputStyle,value:h.value!==void 0?h.value:"",type:"search",...g,id:m===!0?u.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...gl.value};return t!==!0&&y===!0&&(Array.isArray(E.class)===!0?E.class=[...E.class,"no-pointer-events"]:E.class+=" no-pointer-events"),M("input",E)}function Ft(t){p!==null&&(clearTimeout(p),p=null),b!==null&&(clearTimeout(b),b=null),!(t&&t.target&&t.target.qComposing===!0)&&(Ze(t.target.value||""),L=!0,j=h.value,u.focused.value!==!0&&(y!==!0||S.value===!0)&&u.focus(),e.onFilter!==void 0&&(p=setTimeout(()=>{p=null,Ae(h.value)},e.inputDebounce)))}function Ze(t,m){h.value!==t&&(h.value=t,m===!0||e.inputDebounce===0||e.inputDebounce==="0"?l("inputValue",t):b=setTimeout(()=>{b=null,l("inputValue",t)},e.inputDebounce))}function Pe(t,m,g){L=g!==!0,e.useInput===!0&&(Ze(t,!0),(m===!0||g!==!0)&&(j=t),m!==!0&&Ae(t))}function Ae(t,m,g){if(e.onFilter===void 0||m!==!0&&u.focused.value!==!0)return;u.innerLoading.value===!0?l("filterAbort"):(u.innerLoading.value=!0,c.value=!0),t!==""&&e.multiple!==!0&&v.value.length!==0&&L!==!0&&t===Y.value(v.value[0])&&(t="");const E=setTimeout(()=>{a.value===!0&&(a.value=!1)},10);F!==null&&clearTimeout(F),F=E,l("filter",t,(_,O)=>{(m===!0||u.focused.value===!0)&&F===E&&(clearTimeout(F),typeof _=="function"&&_(),c.value=!1,re(()=>{u.innerLoading.value=!1,u.editable.value===!0&&(m===!0?a.value===!0&&be():a.value===!0?mt(!0):a.value=!0),typeof O=="function"&&re(()=>{O(n)}),typeof g=="function"&&re(()=>{g(n)})}))},()=>{u.focused.value===!0&&F===E&&(clearTimeout(F),u.innerLoading.value=!1,c.value=!1),a.value===!0&&(a.value=!1)})}function wl(){return M(Ko,{ref:W,class:x.value,style:e.popupContentStyle,modelValue:a.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&R.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:H.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:dt.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Se.value,onScrollPassive:de,onBeforeShow:It,onBeforeHide:xl,onShow:Cl},Ot)}function xl(t){Lt(t),Me()}function Cl(){he()}function kl(t){ze(t),z.value!==null&&z.value.focus(),S.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Vl(t){ze(t),re(()=>{S.value=!1})}function ql(){const t=[M(Fo,{class:`col-auto ${u.fieldClass.value}`,...k.value,for:u.targetUid.value,dark:H.value,square:!0,loading:c.value,itemAligned:!1,filled:!0,stackLabel:h.value.length!==0,...u.splitAttrs.listeners.value,onFocus:kl,onBlur:Vl},{...o,rawControl:()=>u.getControl(!0),before:void 0,after:void 0})];return a.value===!0&&t.push(M("div",{ref:X,class:x.value+" scroll",style:e.popupContentStyle,...Se.value,onClick:je,onScrollPassive:de},Ot())),M(il,{ref:K,modelValue:s.value,position:e.useInput===!0?"top":void 0,transitionShow:V,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:It,onBeforeHide:El,onHide:Al,onShow:Ml},()=>M("div",{class:"q-select__dialog"+(H.value===!0?" q-select__dialog--dark q-dark":"")+(S.value===!0?" q-select__dialog--focused":"")},t))}function El(t){Lt(t),K.value!==null&&K.value.__updateRefocusTarget(u.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),u.focused.value=!1}function Al(t){be(),u.focused.value===!1&&l("blur",t),Be()}function Ml(){const t=document.activeElement;(t===null||t.id!==u.targetUid.value)&&z.value!==null&&z.value!==t&&z.value.focus(),he()}function Me(){s.value!==!0&&(d.value=-1,a.value===!0&&(a.value=!1),u.focused.value===!1&&(F!==null&&(clearTimeout(F),F=null),u.innerLoading.value===!0&&(l("filterAbort"),u.innerLoading.value=!1,c.value=!1)))}function Te(t){u.editable.value===!0&&(y===!0?(u.onControlFocusin(t),s.value=!0,re(()=>{u.focus()})):u.focus(),e.onFilter!==void 0?Ae(h.value):(R.value!==!0||o["no-option"]!==void 0)&&(a.value=!0))}function be(){s.value=!1,Me()}function Be(){e.useInput===!0&&Pe(e.multiple!==!0&&e.fillInput===!0&&v.value.length!==0&&Y.value(v.value[0])||"",!0,!0)}function mt(t){let m=-1;if(t===!0){if(v.value.length!==0){const g=ae.value(v.value[0]);m=e.options.findIndex(E=>$e(ae.value(E),g))}G(m)}Ee(m)}function Tl(t,m){a.value===!0&&u.innerLoading.value===!1&&(G(-1,!0),re(()=>{a.value===!0&&u.innerLoading.value===!1&&(t>m?G():mt(!0))}))}function _t(){s.value===!1&&W.value!==null&&W.value.updatePosition()}function It(t){t!==void 0&&ze(t),l("popupShow",t),u.hasPopupOpen=!0,u.onControlFocusin(t)}function Lt(t){t!==void 0&&ze(t),l("popupHide",t),u.hasPopupOpen=!1,u.onControlFocusout(t)}function Pt(){y=r.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?o["no-option"]!==void 0||e.onFilter!==void 0||R.value===!1:!0),V=r.platform.is.ios===!0&&y===!0&&e.useInput===!0?"fade":e.transitionShow}return fo(Pt),vo(_t),Pt(),Ue(()=>{p!==null&&clearTimeout(p),b!==null&&clearTimeout(b)}),Object.assign(n,{showPopup:Te,hidePopup:be,removeAtIndex:ft,add:Et,toggleOption:pe,getOptionIndex:()=>d.value,setOptionIndex:Ee,moveOptionSelection:Je,filter:Ae,updateMenuPosition:_t,updateInputValue:Pe,isOptionSelected:vt,getEmittingOptionValue:qt,isOptionDisabled:(...t)=>qe.value.apply(null,t)===!0,getOptionValue:(...t)=>ae.value.apply(null,t),getOptionLabel:(...t)=>Y.value.apply(null,t)}),Object.assign(u,{innerValue:v,fieldClass:w(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:P,targetRef:z,hasValue:$,showPopup:Te,floatingLabel:w(()=>e.hideSelected!==!0&&$.value===!0||typeof h.value=="number"||h.value.length!==0||Wt(e.displayValue)),getControlChild:()=>{if(u.editable.value!==!1&&(s.value===!0||R.value!==!0||o["no-option"]!==void 0))return y===!0?ql():wl();u.hasPopupOpen===!0&&(u.hasPopupOpen=!1)},controlEvents:{onFocusin(t){u.onControlFocusin(t)},onFocusout(t){u.onControlFocusout(t,()=>{Be(),Me()})},onClick(t){if(je(t),y!==!0&&a.value===!0){Me(),z.value!==null&&z.value.focus();return}Te(t)}},getControl:t=>{const m=pl(),g=t===!0||s.value!==!0||y!==!0;if(e.useInput===!0)m.push(bl(t,g));else if(u.editable.value===!0){const _=g===!0?Xe.value:void 0;m.push(M("input",{ref:g===!0?z:void 0,key:"d_t",class:"q-select__focus-target",id:g===!0?u.targetUid.value:void 0,value:Q.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,..._,onKeydown:zt,onKeyup:Mt,onKeypress:Bt})),g===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&m.push(M("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Tt}))}if(te.value!==void 0&&e.disable!==!0&&Ge.value.length!==0){const _=Ge.value.map(O=>M("option",{value:O,selected:!0}));m.push(M("select",{class:"hidden",name:te.value,multiple:e.multiple},_))}const E=e.useInput===!0||g!==!0?void 0:u.splitAttrs.attributes.value;return M("div",{class:"q-field__native row items-center",...E,...u.splitAttrs.listeners.value},m)},getInnerAppend:()=>e.loading!==!0&&c.value!==!0&&e.hideDropdownIcon!==!0?[M(wt,{class:"q-select__dropdown-icon"+(a.value===!0?" rotate-180":""),name:Ie.value})]:null}),nl(u)}}),Jo=()=>!0;function Zo(e){const o={};return e.forEach(l=>{o[l]=Jo}),o}function ut(){const{emit:e,proxy:o}=Fe(),l=C(null);function n(){l.value.show()}function r(){l.value.hide()}function a(d){e("ok",d),r()}function s(){e("hide")}return Object.assign(o,{show:n,hide:r}),{dialogRef:l,onDialogHide:s,onDialogOK:a,onDialogCancel:r}}const vl=["ok","hide"];ut.emits=vl;ut.emitsObject=Zo(vl);const en={class:"text-indigo text-h6"},tn={class:"text-subtitle2"},ln=ct({__name:"DialogComponent",props:{title:{type:String,required:!0},message:{type:String,required:!0},cancel:{type:Boolean,defalut:!1},persistent:{type:Boolean,defalut:!1}},emits:[...ut.emits],setup(e){const{dialogRef:o,onDialogHide:l,onDialogOK:n,onDialogCancel:r}=ut();return(a,s)=>(J(),ue(il,{ref_key:"dialogRef",ref:o,onHide:ve(l),persistent:e.persistent},{default:I(()=>[T(tt,{class:"q-dialog-plugin"},{default:I(()=>[T(Qe,null,{default:I(()=>[xe("div",en,Ke(e.title),1)]),_:1}),T(Qe,null,{default:I(()=>[xe("div",tn,Ke(e.message),1)]),_:1}),T(et,{align:"right"},{default:I(()=>[T(se,{flat:"",class:"text-indigo text-bold",label:"OK",onClick:ve(n)},null,8,["onClick"]),e.cancel?(J(),ue(se,{key:0,flat:"",class:"text-indigo text-bold",label:"Cancel",onClick:ve(r)},null,8,["onClick"])):xt("",!0)]),_:1})]),_:1})]),_:1},8,["onHide","persistent"]))}}),it=w(()=>Mo().category),rt=w(()=>To().format),kt=(e,o,l,n)=>{e.dialog({component:ln,componentProps:{title:"Confirm",message:o,cancel:!0,persistent:!0}}).onOk(()=>{l()}).onCancel(()=>{n()})};class ke{constructor(o,l,n,r,a,s,d){fe(this,"id");fe(this,"title");fe(this,"isbn");fe(this,"categoryId");fe(this,"category");fe(this,"formatId");fe(this,"format");this.id=o??0,this.title=l??"",this.isbn=n??"",this.categoryId=r??0,this.category=a??new sl,this.formatId=s??0,this.format=d??new cl}getBook(o,l){Re.get(De+`/${o}`).then(n=>{l&&l(n.data)})}getBooks(o,l,n){const r=ke.createParameter(o);Re.get(De,{params:r}).then(a=>{l&&l(a.data)}).catch(a=>{n&&n(a)})}createBook(o,l){Re.post(De,this).then(n=>{o&&o(n.data)}).catch(n=>{l&&l(new Map(Object.entries(n.response.data)))})}editBook(o,l){Re.put(De+`/${this.id}`,this).then(n=>{o&&o(n.data)}).catch(n=>{l&&l(new Map(Object.entries(n.response.data)))})}deleteBook(o){Re.delete(De+`/${this.id}`).then(l=>{o&&o(l.data)})}static createParameter(o={}){const l=new URLSearchParams;return Object.keys(o).forEach(n=>{o[n]&&l.append(n,o[n])}),l}}function ml(){return tl(So)}const on=ct({__name:"CreateCard",emits:["cancel"],setup(e,{emit:o}){const l=C(""),n=C(""),r=C(it.value[0]),a=C(rt.value[0]),s=C(new Map),d=C(!1),h=o,S=ml(),c=()=>{kt(S,"Do you want to register it?",()=>p(),()=>!1)},p=()=>{d.value=!0,new ke(0,l.value,n.value,r.value.id,new sl,a.value.id,new cl).createBook(()=>{d.value=!1,h("cancel")},i=>{d.value=!1,s.value=i})};return(b,i)=>(J(),ue(tt,null,{default:I(()=>[T(Qe,{class:"q-px-lg"},{default:I(()=>[T(rl,{class:"q-gutter-sm"},{default:I(()=>[T(Ne,{modelValue:l.value,"onUpdate:modelValue":i[0]||(i[0]=y=>l.value=y),error:s.value.has("title"),"error-message":s.value.get("title"),label:"Title"},null,8,["modelValue","error","error-message"]),T(Ne,{modelValue:n.value,"onUpdate:modelValue":i[1]||(i[1]=y=>n.value=y),error:s.value.has("isbn"),"error-message":s.value.get("isbn"),label:"ISBN"},null,8,["modelValue","error","error-message"]),T(at,{modelValue:r.value,"onUpdate:modelValue":i[2]||(i[2]=y=>r.value=y),options:ve(it),"option-label":"name","option-value":"id",label:"Category"},null,8,["modelValue","options"]),T(at,{modelValue:a.value,"onUpdate:modelValue":i[3]||(i[3]=y=>a.value=y),options:ve(rt),"option-label":"name","option-value":"id",label:"Format"},null,8,["modelValue","options"])]),_:1})]),_:1}),T(et,{align:"between"},{default:I(()=>[T(se,{flat:"",class:"text-indigo text-bold",onClick:i[4]||(i[4]=y=>h("cancel"))},{default:I(()=>i[5]||(i[5]=[He("Cancel")])),_:1}),T(se,{flat:"",class:"text-indigo text-bold",onClick:c,loading:d.value},{default:I(()=>i[6]||(i[6]=[He("Create")])),_:1},8,["loading"])]),_:1})]),_:1}))}}),nn={class:"text-h6"},an={class:"text-subtitle1"},un={class:"text-subtitle2"},rn=ct({__name:"EditCard",props:{book:{type:Object,required:!0}},emits:["cancel"],setup(e,{emit:o}){let l=C(!1);const n=C(""),r=C(""),a=C(it.value[0]),s=C(rt.value[0]),d=C(new Map),h=C(!1),S=e,c=o,p=ml(),b=()=>{l.value?(h.value=!0,kt(p,"Do you want to update it?",()=>i(),()=>!1)):new ke().getBook(S.book.id,V=>{n.value=V.title,r.value=V.isbn,a.value=V.category,s.value=V.format,d.value=new Map,l.value=!0})},i=()=>{new ke(S.book.id,n.value,r.value,a.value.id,a.value,s.value.id,s.value).editBook(()=>{F(),h.value=!1},V=>{d.value=V,h.value=!1})},y=()=>{kt(p,"Do you want to remove it?",()=>L(),()=>!1)},L=()=>{new ke(S.book.id,n.value,r.value,a.value.id,a.value,s.value.id,s.value).deleteBook(()=>F())},F=()=>{l.value=!1,c("cancel")};return(j,V)=>ve(l)?(J(),ue(tt,{key:0},{default:I(()=>[T(Qe,{class:"q-px-lg"},{default:I(()=>[T(rl,{class:"q-gutter-sm"},{default:I(()=>[T(Ne,{modelValue:n.value,"onUpdate:modelValue":V[0]||(V[0]=q=>n.value=q),error:d.value.has("title"),"error-message":d.value.get("title"),label:"Title"},null,8,["modelValue","error","error-message"]),T(Ne,{modelValue:r.value,"onUpdate:modelValue":V[1]||(V[1]=q=>r.value=q),error:d.value.has("isbn"),"error-message":d.value.get("isbn"),label:"ISBN"},null,8,["modelValue","error","error-message"]),T(at,{modelValue:a.value,"onUpdate:modelValue":V[2]||(V[2]=q=>a.value=q),options:ve(it),"option-label":"name","option-value":"id",label:"Category"},null,8,["modelValue","options"]),T(at,{modelValue:s.value,"onUpdate:modelValue":V[3]||(V[3]=q=>s.value=q),options:ve(rt),"option-label":"name","option-value":"id",label:"Format"},null,8,["modelValue","options"])]),_:1})]),_:1}),T(et,{align:"between"},{default:I(()=>[T(se,{flat:"",class:"text-indigo text-bold",onClick:F},{default:I(()=>V[4]||(V[4]=[He("Cancel")])),_:1}),T(se,{flat:"",class:"text-indigo text-bold",onClick:b},{default:I(()=>V[5]||(V[5]=[He("Edit")])),_:1})]),_:1})]),_:1})):yo((J(),ue(tt,{key:1,class:"q-hoverable"},{default:I(()=>[V[8]||(V[8]=xe("span",{class:"q-focus-helper"},null,-1)),T(Qe,null,{default:I(()=>[xe("div",nn,Ke(S.book.title),1),xe("div",an,Ke(S.book.category.name),1),xe("div",un,Ke(S.book.format.name),1)]),_:1}),T(et,{align:"between"},{default:I(()=>[T(se,{flat:"",class:"text-indigo text-bold",onClick:b,loading:h.value},{default:I(()=>V[6]||(V[6]=[He("Edit")])),_:1},8,["loading"]),T(se,{flat:"",class:"text-indigo text-bold",onClick:y},{default:I(()=>V[7]||(V[7]=[He("Delete")])),_:1})]),_:1})]),_:1})),[[po]])}}),sn={class:"q-pa-md items-start q-gutter-md"},cn={key:0,class:"window-height window-width row justify-center items-center"},mn=ct({__name:"HomeView",setup(e){const o=C(!1),l=C(""),n=C(new Array(0)),r=C(!1),a=()=>{r.value=!0,new ke().getBooks({query:l.value},S=>{n.value=S.content,r.value=!1},()=>r.value=!1)},s=()=>{o.value=!0,window.scrollTo(0,0)},d=()=>{o.value=!1,a()};return a(),(h,S)=>(J(),ue(Bo,null,{header:I(()=>[T(Ne,{dark:"",dense:"",standout:"",modelValue:l.value,"onUpdate:modelValue":S[1]||(S[1]=c=>l.value=c),"input-class":"text-left",class:"col",placeholder:"Search...",onKeyup:bo(a,["enter"])},{append:I(()=>[l.value===""?(J(),ue(wt,{key:0,name:"search",onClick:a})):(J(),ue(wt,{key:1,name:"clear",class:"cursor-pointer",onClick:S[0]||(S[0]=c=>l.value="")}))]),_:1},8,["modelValue"])]),main:I(()=>[xe("div",sn,[r.value?(J(),jt("div",cn,[T(wo,{color:"indigo",size:"xl",thickness:10})])):xt("",!0),o.value?(J(),ue(on,{key:1,onCancel:d})):xt("",!0),(J(!0),jt(Co,null,xo(n.value,c=>(J(),ue(rn,{book:c,key:c.id,onCancel:d},null,8,["book"]))),128))]),T(Oo,{position:"bottom-right",offset:[18,18]},{default:I(()=>[T(se,{round:"",color:"indigo",icon:"add",size:"lg",onClick:s})]),_:1})]),_:1}))}});export{mn as default};
